(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{2332:function(e,t,s){Promise.resolve().then(s.bind(s,3962))},3962:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var l=s(3827),a=s(4090);function r(){let[e,t]=(0,a.useState)(""),[s,r]=(0,a.useState)(null),[c,n]=(0,a.useState)(null),[d,i]=(0,a.useState)(null),[o,x]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[b,p]=(0,a.useState)("strategy"),[u,g]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),[w,v]=(0,a.useState)(null),D=async()=>{try{let e=await fetch("/api/sheets-status"),t=await e.json();r(t)}catch(e){console.error("상태 확인 실패:",e)}},C=async()=>{if(!e.trim()){alert("구글 시트 URL을 입력해주세요");return}g(!0);try{let t=await fetch("/api/sheets-connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spreadsheet_url:e})}),s=await t.json();n(s),s.success&&s.spreadsheet_id&&(N(s.spreadsheet_id),localStorage.setItem("connected_sheet_url",e),localStorage.setItem("connected_spreadsheet_id",s.spreadsheet_id))}catch(e){console.error("연결 실패:",e),n({success:!1,message:"연결 중 오류가 발생했습니다"})}finally{g(!1)}},k=async()=>{if(!j){alert("먼저 시트를 연결해주세요");return}g(!0);try{let e=await fetch("/api/sheets-strategy?spreadsheet_id=".concat(j)),t=await e.json();t.success&&i(t.strategy)}catch(e){console.error("전략 로드 실패:",e)}finally{g(!1)}},_=async()=>{if(!j){alert("먼저 시트를 연결해주세요");return}g(!0);try{let e=await fetch("/api/sheets-schedule?spreadsheet_id=".concat(j)),t=await e.json();t.success&&x(t.schedule)}catch(e){console.error("스케줄 로드 실패:",e)}finally{g(!1)}},S=async()=>{if(!j){alert("먼저 시트를 연결해주세요");return}g(!0);try{let e=await fetch("/api/sheets-resources?spreadsheet_id=".concat(j)),t=await e.json();t.success&&m(t.resources)}catch(e){console.error("리소스 로드 실패:",e)}finally{g(!1)}},O=async e=>{if(!j){alert("먼저 시트를 연결해주세요");return}let t=e["소제목"]||e["주제"],s=e["캠페인명"],l=e["플랫폼"]||"YouTube";v(t);try{let e=await fetch("/api/writer-generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spreadsheet_id:j,campaign_name:s,topic:t,platform:l})}),a=await e.json();a.success?y(a):alert("스크립트 생성 실패: ".concat(a.error||"알 수 없는 오류"))}catch(e){console.error("스크립트 생성 실패:",e),alert("스크립트 생성 중 오류가 발생했습니다")}finally{v(null)}};return(0,l.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-16",children:[(0,l.jsxs)("div",{className:"text-center mb-12",children:[(0,l.jsx)("h1",{className:"text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-blue-600",children:"\uD83D\uDCCA 구글 시트 연동"}),(0,l.jsx)("p",{className:"text-xl text-gray-300",children:"전략 및 콘텐츠 스케줄을 구글 시트로 관리하세요"}),(0,l.jsx)("button",{onClick:D,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm",children:"연결 상태 확인"})]}),s&&(0,l.jsx)("div",{className:"max-w-2xl mx-auto mb-8 p-4 rounded-lg ".concat(s.available?"bg-green-500/20 border border-green-500/30":"bg-yellow-500/20 border border-yellow-500/30"),children:(0,l.jsxs)("p",{className:"text-center",children:[s.available?"✅ ":"⚠️ ",s.message]})}),(0,l.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"시트 연결하기"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"구글 시트 URL"}),(0,l.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsx)("button",{onClick:C,disabled:u,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 rounded-lg font-semibold disabled:opacity-50",children:u?"연결 중...":"시트 연결하기"}),c&&(0,l.jsxs)("div",{className:"mt-4 p-4 rounded-lg ".concat(c.success?"bg-green-500/20":"bg-red-500/20"),children:[(0,l.jsxs)("p",{children:[c.success?"✅":"❌"," ",c.message]}),c.spreadsheet_id&&(0,l.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["ID: ",c.spreadsheet_id]})]})]})}),j&&(0,l.jsx)("div",{className:"max-w-6xl mx-auto mb-8",children:(0,l.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-2 border border-white/20",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("button",{onClick:()=>{p("strategy"),(null===d||0===Object.keys(d).length)&&k()},className:"flex-1 px-6 py-4 rounded-xl transition-all ".concat("strategy"===b?"bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold":"bg-white/5 hover:bg-white/10 text-gray-300"),children:[(0,l.jsx)("h3",{className:"text-lg font-bold",children:"\uD83D\uDCCB 전략"}),(0,l.jsx)("p",{className:"text-xs mt-1 opacity-80",children:"캠페인 전략 및 설정"})]}),(0,l.jsxs)("button",{onClick:()=>{p("schedule"),0===o.length&&_()},className:"flex-1 px-6 py-4 rounded-xl transition-all ".concat("schedule"===b?"bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold":"bg-white/5 hover:bg-white/10 text-gray-300"),children:[(0,l.jsx)("h3",{className:"text-lg font-bold",children:"\uD83D\uDCC5 스케줄"}),(0,l.jsx)("p",{className:"text-xs mt-1 opacity-80",children:"콘텐츠 일정 관리"})]}),(0,l.jsxs)("button",{onClick:()=>{p("resources"),0===h.length&&S()},className:"flex-1 px-6 py-4 rounded-xl transition-all ".concat("resources"===b?"bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold":"bg-white/5 hover:bg-white/10 text-gray-300"),children:[(0,l.jsx)("h3",{className:"text-lg font-bold",children:"\uD83C\uDFAC 리소스"}),(0,l.jsx)("p",{className:"text-xs mt-1 opacity-80",children:"이미지, 영상, 음원"})]})]})})}),j&&(0,l.jsxs)(l.Fragment,{children:["strategy"===b&&d&&Object.keys(d).length>0&&(0,l.jsx)("div",{className:"max-w-4xl mx-auto mb-8",children:(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\uD83D\uDCCB 캠페인 전략"}),(0,l.jsx)("div",{className:"grid gap-3",children:Object.entries(d).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-400",children:t}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:s})]},t)})})]})}),"schedule"===b&&o.length>0&&(0,l.jsx)("div",{className:"max-w-6xl mx-auto mb-8",children:(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["\uD83D\uDCC5 콘텐츠 스케줄 (",o.length,"개)"]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-white/20",children:[o[0]&&Object.keys(o[0]).map(e=>(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:e},e)),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"액션"})]})}),(0,l.jsx)("tbody",{children:o.map((e,t)=>(0,l.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[Object.values(e).map((e,t)=>(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:e},t)),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("button",{onClick:()=>O(e),disabled:w===(e["소제목"]||e["주제"]),className:"px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 rounded text-xs font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:w===(e["소제목"]||e["주제"])?"생성 중...":"\uD83D\uDCDD 스크립트"})})]},t))})]})})]})}),"resources"===b&&h.length>0&&(0,l.jsx)("div",{className:"max-w-6xl mx-auto mb-8",children:(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["\uD83C\uDFAC 리소스 목록 (",h.length,"개)"]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-white/20",children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"캠페인명"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"소제목"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"리소스명"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"타입"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"URL/경로"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"용도"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"업로드일"})]})}),(0,l.jsx)("tbody",{children:h.map((e,t)=>(0,l.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:e.캠페인명}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:e.소제목}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm font-semibold",children:e.리소스명}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("image"===e.리소스타입?"bg-blue-500/20 text-blue-400":"video"===e.리소스타입?"bg-purple-500/20 text-purple-400":"audio"===e.리소스타입?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:e.리소스타입})}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,l.jsx)("a",{href:e["URL/경로"],target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline truncate block max-w-xs",children:e["URL/경로"]})}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:e.용도}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-400",children:e.업로드일})]},t))})]})})]})})]}),f&&(0,l.jsx)("div",{className:"max-w-4xl mx-auto mb-8",children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-purple-900/50 to-pink-900/50 backdrop-blur-lg rounded-2xl p-8 border border-purple-500/30",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"✨ 생성된 스크립트"}),(0,l.jsxs)("p",{className:"text-sm text-gray-300",children:["주제: ",f.topic," | 플랫폼: ",f.platform]})]}),(0,l.jsx)("button",{onClick:()=>y(null),className:"px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-sm",children:"✕ 닫기"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[f.target_audience&&(0,l.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"타겟"}),(0,l.jsx)("p",{className:"font-semibold",children:f.target_audience})]}),f.tone&&(0,l.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"톤앤매너"}),(0,l.jsx)("p",{className:"font-semibold",children:f.tone})]}),f.estimated_duration&&(0,l.jsxs)("div",{className:"bg-white/5 rounded-lg p-3",children:[(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"예상 길이"}),(0,l.jsxs)("p",{className:"font-semibold",children:[f.estimated_duration,"초"]})]})]}),f.hook&&(0,l.jsxs)("div",{className:"mb-6 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-bold text-yellow-400 mb-2",children:"\uD83C\uDFA3 훅 (첫 3초)"}),(0,l.jsx)("p",{className:"text-sm",children:f.hook})]}),(0,l.jsxs)("div",{className:"mb-6 bg-white/5 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-bold mb-3",children:"\uD83D\uDCDD 스크립트 본문"}),(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:f.script})]}),f.cta&&(0,l.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-bold text-green-400 mb-2",children:"\uD83D\uDCE2 CTA (행동 유도)"}),(0,l.jsx)("p",{className:"text-sm",children:f.cta})]}),(0,l.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(f.script),alert("스크립트가 클립보드에 복사되었습니다!")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-semibold",children:"\uD83D\uDCCB 스크립트 복사"}),(0,l.jsx)("button",{onClick:()=>{let e="훅:\n".concat(f.hook,"\n\n본문:\n").concat(f.script,"\n\nCTA:\n").concat(f.cta);navigator.clipboard.writeText(e),alert("전체 스크립트가 클립보드에 복사되었습니다!")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-sm font-semibold",children:"\uD83D\uDCC4 전체 복사"})]})]})}),(0,l.jsx)("div",{className:"text-center mt-8",children:(0,l.jsx)("a",{href:"/",className:"inline-block px-6 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-lg rounded-lg border border-white/20 transition-all",children:"← 홈으로 돌아가기"})})]})})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2332)}),_N_E=e.O()}]);